# Check Inner debt of Gnosis Deposit Contract
GNO rewards to validators are not paid through a emission of new token, instead, they are paid by GnosisDAO.

As the [deposit contract](https://gnosisscan.io/address/0x0b98057ea310f4d31f2a452b414647007d1645d9) processing deposits as wel las withdrawals (including rewards), with each reward (claimed as well as unclaimed), an internal debt is being generated. This debt should be covered by Gnosis DAO to keep all validator funds covered.

Gnosis deposit contract balance is being tracked by Stakers.space. [Check GNO deposit balance online](https://stakers.space/gnosis-staking/deposit-contract-balance)

This script allows to get current state of the internal debt on the deposit contract.

## Prerequisities
- node.js installed
- Synchronized Execution and Beacon client

## Download script to server
- View the script
```
curl -o- https://raw.githubusercontent.com/Stakers-space/staking-scripts/refs/heads/main/get-data-utils/gnosis_deposit_contract_balance/check-balance.js
```
- Download the script to `/opt/stakersspace/gnosis-deposit-contract-balance` directory
```
sudo curl -o check-gnosis-deposit-contract-balance.js https://raw.githubusercontent.com/Stakers-space/staking-scripts/refs/heads/main/get-data-utils/gnosis_deposit_contract_balance/check-balance.js
```
- Set ownership
sudo chown stakersspace:stakersspace check-gnosis-deposit-contract-balance.js

### Usage
Run `node check-gnosis-deposit-contract-balance.js --beaconPort 9596 --executionPort 8545`.

### Output
There's a text based UI output as well as object-based output allowing connection of the util with other scripts.
- UI based output:
```
Starting check GNO balance in Gnosis Validators Deposit contract
├─ beaconPort: 9596 from attached param
├─ executionPort: 8545 from attached param
├── Getting current Epoch number...
├── GNO balance in deposit contract: 307183762426898 (307183.762426898 GNO)
|   └── Current epoch: 1207110
├── Processing validators snapshot for head slot state...
|  ├── snapshot completed | registered validators: 464775
|  └── Withdrawal addresses: 3502
|  └── Total GNO balance holded by validators on beaconchain in ETHgwei: 10527403030780972
|      └── In gwei: 328981344711905.4
|           └── In GNO: 328981.3447119054
|  └── Total unclaimed GNO balance by validators in wei: 5.86507431339212e+21
|       └── Total unclaimed GNO balance by validators in GNO: 5865.07431339212
└── Deposit contract balance: -21797582290872.45
     └── In GNO: -21797.582290872448
GNO distribution || Validators: 464775 rounded GNO holdings:number of validators {
  '0': 135701,
  '1': 323562,
  '0.99': 627,
  '0.98': 524,
  '0.9': 578,
  '0.89': 421,
  '0.93': 403,
  '0.92': 219,
  '0.91': 402,
  '1.4': 7,
  '0.97': 573,
  '0.82': 52,
  '1.37': 33,
  '1.36': 19,
  '1.38': 8,
  '1.39': 3,
  '1.35': 21,
  '0.81': 58,
  '1.3': 3,
  '0.88': 59,
  '0.95': 146,
  '1.15': 8,
  '0.94': 114,
  '1.41': 1,
  '1.21': 28,
  '0.86': 49,
  '1.07': 30,
  '1.31': 1,
  '0.87': 64,
  '1.22': 11,
  '0.75': 5,
  '1.02': 57,
  '0.79': 22,
  '1.2': 55,
  '0.96': 55,
  '0.76': 17,
  '1.34': 46,
  '0.84': 39,
  '0.77': 31,
  '0.8': 26,
  '1.29': 5,
  '1.04': 24,
  '1.19': 20,
  '0.78': 23,
  '1.14': 34,
  '1.23': 18,
  '1.13': 14,
  '0.83': 47,
  '0.85': 31,
  '1.27': 18,
  '1.28': 7,
  '1.26': 16,
  '1.06': 15,
  '1.33': 31,
  '1.32': 8,
  '1.24': 34,
  '1.03': 67,
  '1.09': 39,
  '1.1': 34,
  '1.08': 10,
  '1.25': 17,
  '1.12': 10,
  '1.18': 16,
  '1.01': 86,
  '1.17': 11,
  '1.16': 12,
  '1.11': 12,
  '1.05': 38
}
Unclaimed GNO distribution || Wallets: 3502 | output format: Unclaimed GNO : number of wallets {
  '0': 2504,
  '1': 10,
  '4': 4,
  '7': 1,
  '87': 1,
  '0.2': 8,
  '1.79': 2,
  '0.3': 4,
  '26.1': 1,
  '34.86': 1,
  '2.25': 1,
  '0.06': 28,
  '6.99': 1,
  '0.6': 4,
  '0.68': 3,
  '0.12': 15,
  '0.13': 10,
  '0.37': 2,
  '3.59': 1,
  '2.92': 1,
  '2.91': 1,
  '30.51': 1,
  '2.29': 1,
  '3.06': 1,
  '17.78': 1,
  '344.55': 1,
  '5.53': 1,
  '8.78': 1,
  '1.08': 2,
  '0.43': 3,
  '0.08': 24,
  '0.46': 5,
  '9.52': 1,
  '2.84': 1,
  '1.54': 2,
  '0.92': 3,
  '0.28': 10,
  '0.04': 25,
  '1.92': 2,
  '1.88': 1,
  '12.62': 1,
  '0.26': 5,
  '0.11': 13,
  '0.31': 13,
  '0.41': 6,
  '0.44': 2,
  '0.62': 3,
  '3.97': 1,
  '0.61': 11,
  '52.15': 1,
  '1.73': 2,
  '0.02': 43,
  '24.14': 1,
  '1.19': 5,
  '0.7': 2,
  '0.81': 3,
  '5.01': 2,
  '0.1': 27,
  '0.23': 4,
  '0.05': 43,
  '0.93': 1,
  '0.64': 1,
  '2.12': 2,
  '2.86': 2,
  '0.48': 3,
  '1.53': 1,
  '1.55': 5,
  '0.75': 5,
  '1.39': 2,
  '2.09': 2,
  '0.36': 6,
  '1.69': 1,
  '38.03': 1,
  '0.73': 4,
  '1.12': 4,
  '1.5': 1,
  '0.95': 2,
  '1.11': 4,
  '2.02': 2,
  '1.07': 4,
  '0.4': 9,
  '1.28': 1,
  '0.32': 7,
  '3.94': 1,
  '361.68': 1,
  '0.53': 12,
  '2.08': 1,
  '0.22': 11,
  '0.17': 10,
  '2.35': 2,
  '0.21': 11,
  '1.84': 1,
  '3.99': 2,
  '0.03': 33,
  '1.62': 1,
  '19.56': 1,
  '6.95': 1,
  '0.09': 17,
  '9.98': 1,
  '0.52': 3,
  '5.98': 1,
  '6.88': 1,
  '14.96': 1,
  '4.08': 1,
  '1.06': 2,
  '64.54': 1,
  '1.1': 1,
  '0.19': 3,
  '1.42': 2,
  '8.59': 1,
  '5.78': 1,
  '2.88': 1,
  '19.14': 1,
  '17.85': 1,
  '56.63': 1,
  '13.9': 1,
  '0.51': 2,
  '1279.43': 1,
  '0.15': 24,
  '1.44': 3,
  '1.81': 1,
  '0.16': 16,
  '0.25': 5,
  '0.86': 1,
  '10.05': 1,
  '1.15': 3,
  '11.34': 1,
  '0.14': 16,
  '13.59': 1,
  '0.34': 4,
  '1.51': 2,
  '9.46': 2,
  '0.42': 6,
  '0.07': 16,
  '2.93': 1,
  '2.49': 1,
  '9.67': 1,
  '4.91': 1,
  '7.46': 1,
  '5.88': 1,
  '4.22': 1,
  '0.01': 73,
  '1.03': 1,
  '1.41': 1,
  '1.09': 2,
  '1.67': 2,
  '3.05': 1,
  '0.87': 4,
  '1.56': 2,
  '1.46': 1,
  '0.5': 4,
  '1.21': 1,
  '0.79': 1,
  '0.72': 4,
  '35.75': 1,
  '9.64': 1,
  '1.48': 1,
  '0.47': 5,
  '2.03': 1,
  '11.78': 1,
  '1.33': 2,
  '3.4': 1,
  '0.83': 2,
  '0.58': 4,
  '0.35': 5,
  '12.28': 1,
  '1.98': 1,
  '0.49': 4,
  '0.57': 6,
  '0.56': 7,
  '0.27': 6,
  '8.45': 1,
  '0.59': 6,
  '40.1': 1,
  '0.63': 4,
  '9.26': 1,
  '1.04': 1,
  '3.33': 1,
  '1.23': 1,
  '0.55': 4,
  '4.42': 1,
  '7.42': 1,
  '0.9': 4,
  '4.16': 1,
  '1.02': 2,
  '1.91': 1,
  '4.02': 1,
  '0.54': 3,
  '0.38': 4,
  '4.01': 1,
  '0.65': 2,
  '0.8': 1,
  '2.82': 1,
  '1.26': 2,
  '3.09': 2,
  '7.74': 1,
  '0.88': 1,
  '0.18': 3,
  '0.24': 6,
  '0.76': 3,
  '1.16': 1,
  '6.46': 1,
  '4.29': 1,
  '0.45': 3,
  '0.29': 2,
  '7.48': 1,
  '79.43': 1,
  '1.93': 1,
  '0.78': 1,
  '13.15': 1,
  '5.6': 1,
  '1.95': 1,
  '2.01': 2,
  '22.54': 1,
  '0.84': 1,
  '183.64': 1,
  '1.01': 1,
  '50.66': 1,
  '8.23': 1,
  '4.55': 2,
  '1.58': 2,
  '4.07': 1,
  '29.13': 1,
  '8.87': 1,
  '18.41': 1,
  '0.39': 3,
  '2.39': 1,
  '50.57': 1,
  '49.25': 1,
  '51.26': 1,
  '5.58': 1,
  '20.88': 1,
  '27.19': 1,
  '38.33': 1,
  '1.34': 1,
  '10.27': 1,
  '0.77': 1,
  '0.74': 1,
  '2.62': 1,
  '15.04': 1,
  '5.95': 1,
  '32.08': 1,
  '1.97': 1,
  '559.03': 1,
  '110.89': 1,
  '75.23': 1,
  '28.98': 1,
  '9.31': 1,
  '3.13': 1,
  '0.82': 2,
  '0.67': 2,
  '0.89': 1,
  '7.19': 1,
  '2.04': 1,
  '1.6': 1,
  '0.71': 1,
  '2.56': 1,
  '2.31': 1,
  '2.72': 1,
  '4.6': 1,
  '50.46': 1,
  '50.59': 1,
  '86.09': 1,
  '49.6': 1,
  '43.15': 1,
  '50.81': 1,
  '31.89': 1,
  '26.34': 1,
  '32.34': 1,
  '6.31': 1,
  '6.56': 1,
  '3.23': 1,
  '69.95': 1,
  '29.94': 1,
  '1.52': 1,
  '126.79': 1,
  '5.94': 1,
  '5.61': 1,
  '58.79': 1,
  '1.45': 1,
  '196.07': 1,
  '1.4': 1,
  '1.3': 1,
  '1.22': 1,
  '18.79': 1,
  '5.2': 1,
  '42.64': 1,
  '0.69': 1,
  '0.94': 1,
  '3.03': 1,
  '0.99': 1,
  '5.03': 1,
  '1.7': 1,
  '1.85': 1,
  '5.63': 1,
  '2.23': 1,
  '4.26': 1
}
```
- Object-based output. Attach callback listener of schema `error, response` for `Process` request from external script
```
2024-12-30T12:37:45.043Z process completed | Response object: {
  time: 1735562265043,
  epoch: 1207110,
  GNO_validators: 328981344711905.4,
  GNO_contract: 307183762426898,
  GNO_unclaimed: 5865.07431339212,
  bilance: -21797582290872.45,
  validators: 464775,
  beaconchain_distribution: {
    '0': 135701,
    '1': 323562,
    '0.99': 627,
    '0.98': 524,
    '0.9': 578,
    '0.89': 421,
    '0.93': 403,
    '0.92': 219,
    '0.91': 402,
    '1.4': 7,
    '0.97': 573,
    '0.82': 52,
    '1.37': 33,
    '1.36': 19,
    '1.38': 8,
    '1.39': 3,
    '1.35': 21,
    '0.81': 58,
    '1.3': 3,
    '0.88': 59,
    '0.95': 146,
    '1.15': 8,
    '0.94': 114,
    '1.41': 1,
    '1.21': 28,
    '0.86': 49,
    '1.07': 30,
    '1.31': 1,
    '0.87': 64,
    '1.22': 11,
    '0.75': 5,
    '1.02': 57,
    '0.79': 22,
    '1.2': 55,
    '0.96': 55,
    '0.76': 17,
    '1.34': 46,
    '0.84': 39,
    '0.77': 31,
    '0.8': 26,
    '1.29': 5,
    '1.04': 24,
    '1.19': 20,
    '0.78': 23,
    '1.14': 34,
    '1.23': 18,
    '1.13': 14,
    '0.83': 47,
    '0.85': 31,
    '1.27': 18,
    '1.28': 7,
    '1.26': 16,
    '1.06': 15,
    '1.33': 31,
    '1.32': 8,
    '1.24': 34,
    '1.03': 67,
    '1.09': 39,
    '1.1': 34,
    '1.08': 10,
    '1.25': 17,
    '1.12': 10,
    '1.18': 16,
    '1.01': 86,
    '1.17': 11,
    '1.16': 12,
    '1.11': 12,
    '1.05': 38
  },
  wallets: 3502,
  unclaimed_distribution: {
    '0': 2504,
    '1': 10,
    '4': 4,
    '7': 1,
    '87': 1,
    '0.2': 8,
    '1.79': 2,
    '0.3': 4,
    '26.1': 1,
    '34.86': 1,
    '2.25': 1,
    '0.06': 28,
    '6.99': 1,
    '0.6': 4,
    '0.68': 3,
    '0.12': 15,
    '0.13': 10,
    '0.37': 2,
    '3.59': 1,
    '2.92': 1,
    '2.91': 1,
    '30.51': 1,
    '2.29': 1,
    '3.06': 1,
    '17.78': 1,
    '344.55': 1,
    '5.53': 1,
    '8.78': 1,
    '1.08': 2,
    '0.43': 3,
    '0.08': 24,
    '0.46': 5,
    '9.52': 1,
    '2.84': 1,
    '1.54': 2,
    '0.92': 3,
    '0.28': 10,
    '0.04': 25,
    '1.92': 2,
    '1.88': 1,
    '12.62': 1,
    '0.26': 5,
    '0.11': 13,
    '0.31': 13,
    '0.41': 6,
    '0.44': 2,
    '0.62': 3,
    '3.97': 1,
    '0.61': 11,
    '52.15': 1,
    '1.73': 2,
    '0.02': 43,
    '24.14': 1,
    '1.19': 5,
    '0.7': 2,
    '0.81': 3,
    '5.01': 2,
    '0.1': 27,
    '0.23': 4,
    '0.05': 43,
    '0.93': 1,
    '0.64': 1,
    '2.12': 2,
    '2.86': 2,
    '0.48': 3,
    '1.53': 1,
    '1.55': 5,
    '0.75': 5,
    '1.39': 2,
    '2.09': 2,
    '0.36': 6,
    '1.69': 1,
    '38.03': 1,
    '0.73': 4,
    '1.12': 4,
    '1.5': 1,
    '0.95': 2,
    '1.11': 4,
    '2.02': 2,
    '1.07': 4,
    '0.4': 9,
    '1.28': 1,
    '0.32': 7,
    '3.94': 1,
    '361.68': 1,
    '0.53': 12,
    '2.08': 1,
    '0.22': 11,
    '0.17': 10,
    '2.35': 2,
    '0.21': 11,
    '1.84': 1,
    '3.99': 2,
    '0.03': 33,
    '1.62': 1,
    '19.56': 1,
    '6.95': 1,
    '0.09': 17,
    '9.98': 1,
    '0.52': 3,
    '5.98': 1,
    '6.88': 1,
    '14.96': 1,
    '4.08': 1,
    '1.06': 2,
    '64.54': 1,
    '1.1': 1,
    '0.19': 3,
    '1.42': 2,
    '8.59': 1,
    '5.78': 1,
    '2.88': 1,
    '19.14': 1,
    '17.85': 1,
    '56.63': 1,
    '13.9': 1,
    '0.51': 2,
    '1279.43': 1,
    '0.15': 24,
    '1.44': 3,
    '1.81': 1,
    '0.16': 16,
    '0.25': 5,
    '0.86': 1,
    '10.05': 1,
    '1.15': 3,
    '11.34': 1,
    '0.14': 16,
    '13.59': 1,
    '0.34': 4,
    '1.51': 2,
    '9.46': 2,
    '0.42': 6,
    '0.07': 16,
    '2.93': 1,
    '2.49': 1,
    '9.67': 1,
    '4.91': 1,
    '7.46': 1,
    '5.88': 1,
    '4.22': 1,
    '0.01': 73,
    '1.03': 1,
    '1.41': 1,
    '1.09': 2,
    '1.67': 2,
    '3.05': 1,
    '0.87': 4,
    '1.56': 2,
    '1.46': 1,
    '0.5': 4,
    '1.21': 1,
    '0.79': 1,
    '0.72': 4,
    '35.75': 1,
    '9.64': 1,
    '1.48': 1,
    '0.47': 5,
    '2.03': 1,
    '11.78': 1,
    '1.33': 2,
    '3.4': 1,
    '0.83': 2,
    '0.58': 4,
    '0.35': 5,
    '12.28': 1,
    '1.98': 1,
    '0.49': 4,
    '0.57': 6,
    '0.56': 7,
    '0.27': 6,
    '8.45': 1,
    '0.59': 6,
    '40.1': 1,
    '0.63': 4,
    '9.26': 1,
    '1.04': 1,
    '3.33': 1,
    '1.23': 1,
    '0.55': 4,
    '4.42': 1,
    '7.42': 1,
    '0.9': 4,
    '4.16': 1,
    '1.02': 2,
    '1.91': 1,
    '4.02': 1,
    '0.54': 3,
    '0.38': 4,
    '4.01': 1,
    '0.65': 2,
    '0.8': 1,
    '2.82': 1,
    '1.26': 2,
    '3.09': 2,
    '7.74': 1,
    '0.88': 1,
    '0.18': 3,
    '0.24': 6,
    '0.76': 3,
    '1.16': 1,
    '6.46': 1,
    '4.29': 1,
    '0.45': 3,
    '0.29': 2,
    '7.48': 1,
    '79.43': 1,
    '1.93': 1,
    '0.78': 1,
    '13.15': 1,
    '5.6': 1,
    '1.95': 1,
    '2.01': 2,
    '22.54': 1,
    '0.84': 1,
    '183.64': 1,
    '1.01': 1,
    '50.66': 1,
    '8.23': 1,
    '4.55': 2,
    '1.58': 2,
    '4.07': 1,
    '29.13': 1,
    '8.87': 1,
    '18.41': 1,
    '0.39': 3,
    '2.39': 1,
    '50.57': 1,
    '49.25': 1,
    '51.26': 1,
    '5.58': 1,
    '20.88': 1,
    '27.19': 1,
    '38.33': 1,
    '1.34': 1,
    '10.27': 1,
    '0.77': 1,
    '0.74': 1,
    '2.62': 1,
    '15.04': 1,
    '5.95': 1,
    '32.08': 1,
    '1.97': 1,
    '559.03': 1,
    '110.89': 1,
    '75.23': 1,
    '28.98': 1,
    '9.31': 1,
    '3.13': 1,
    '0.82': 2,
    '0.67': 2,
    '0.89': 1,
    '7.19': 1,
    '2.04': 1,
    '1.6': 1,
    '0.71': 1,
    '2.56': 1,
    '2.31': 1,
    '2.72': 1,
    '4.6': 1,
    '50.46': 1,
    '50.59': 1,
    '86.09': 1,
    '49.6': 1,
    '43.15': 1,
    '50.81': 1,
    '31.89': 1,
    '26.34': 1,
    '32.34': 1,
    '6.31': 1,
    '6.56': 1,
    '3.23': 1,
    '69.95': 1,
    '29.94': 1,
    '1.52': 1,
    '126.79': 1,
    '5.94': 1,
    '5.61': 1,
    '58.79': 1,
    '1.45': 1,
    '196.07': 1,
    '1.4': 1,
    '1.3': 1,
    '1.22': 1,
    '18.79': 1,
    '5.2': 1,
    '42.64': 1,
    '0.69': 1,
    '0.94': 1,
    '3.03': 1,
    '0.99': 1,
    '5.03': 1,
    '1.7': 1,
    '1.85': 1,
    '5.63': 1,
    '2.23': 1,
    '4.26': 1
  }
}
```
